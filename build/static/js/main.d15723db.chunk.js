(this["webpackJsonpemail-workflow-front-end"]=this["webpackJsonpemail-workflow-front-end"]||[]).push([[0],{45:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a,r=n(1),s=n.n(r),c=n(36),i=n.n(c),l=(n(45),n(46),n(2)),o=n(4),j=n(6),b=n(7),d=n.p+"static/media/main2.b1ab85f6.svg",u=n.p+"static/media/google-play-badge.0062d571.png",m=n(3),p=n(9),h=n(8),g=n(12),x=n.n(g),O="https://savannaspace.co.ke",f=n(0),v=s.a.createContext(),w=function(e){var t=e.children,n=Object(r.useState)(!0),a=Object(h.a)(n,2),s=a[0],c=a[1],i=Object(r.useState)(null),l=Object(h.a)(i,2),o=l[0],j=l[1],b=function(e){j(e)},d=function(){j(null)},u=function(){var e=Object(p.a)(Object(m.a)().mark((function e(){var t,n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(O+"/api/v1/users/showMe");case 3:t=e.sent,n=t.data,b(n.user),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d();case 11:c(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(Object(m.a)().mark((function e(){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete(O+"/api/v1/auth/logout");case 3:d(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){u()}),[]),Object(f.jsx)(v.Provider,{value:{isLoading:s,saveUser:b,user:o,logoutUser:g},children:t})},y=function(){return Object(r.useContext)(v)};var k,N,S=b.a.div(a||(a=Object(j.a)(["\n  display: grid;\n  align-items: center;\n  h2 {\n    font-weight: 700;\n  }\n  h2 span {\n    color: var(--primary-500);\n  }\n  .main-img {\n    display: none;\n  }\n  @media (min-width: 992px) {\n    grid-template-columns: 1fr 1fr;\n    column-gap: 6rem;\n    .main-img {\n      display: block;\n    }\n  }\n  .btn {\n    margin-left: 0.25rem;\n    margin-right: 0.25rem;\n  }\n"]))),L=function(){var e=y().user;return Object(f.jsxs)(f.Fragment,{children:[e&&Object(f.jsx)(o.a,{to:"/dashboard"}),Object(f.jsxs)(S,{className:"page",children:[Object(f.jsxs)("div",{className:"info",children:[Object(f.jsxs)("h2",{children:[Object(f.jsx)("span",{children:"Emed"}),"Africa"]}),Object(f.jsx)("br",{}),Object(f.jsxs)("h3",{children:[Object(f.jsx)("span",{children:"In Emergency | "}),"In Convenience"]}),Object(f.jsx)("p",{children:"Simpler, more efficient and more effective way for patients to find verified health service providers they love and a smarter way for health service providers to find fantastic patients."}),Object(f.jsx)("p",{children:Object(f.jsxs)("a",{href:"https://play.google.com/store/apps/details?id=com.imbuga.EmedAfrica",children:["   ",Object(f.jsx)("img",{src:u,alt:"job hunt",className:"appstore"})]})}),Object(f.jsx)(l.b,{to:"/login",className:"btn",children:"Login"}),Object(f.jsx)(l.b,{to:"/register",className:"btn",children:"Register"})]}),Object(f.jsx)("img",{src:d,alt:"job hunt",className:"img main-img"})]})]})},C=b.a.main(k||(k=Object(j.a)(["\n  text-align: center;\n  padding-top: 5rem;\n  h1 {\n    font-size: 9rem;\n  }\n"]))),A=function(){return Object(f.jsx)(C,{className:"page",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"404"}),Object(f.jsx)("h4",{children:"page not found"}),Object(f.jsx)(l.b,{to:"/",className:"btn",children:"Back Home"})]})})},P=n(18),R=n(16),F=function(e){var t=e.type,n=e.name,a=e.value,r=e.handleChange;return Object(f.jsxs)("div",{className:"form-row",children:[Object(f.jsx)("label",{htmlFor:n,className:"form-label",children:n}),Object(f.jsx)("input",{type:t,value:a,name:n,onChange:r,className:"form-input"})]})},I=function(){var e=Object(r.useState)({show:!1,text:"",type:"danger"}),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(h.a)(s,2),i=c[0],l=c[1],o=Object(r.useState)(!1),j=Object(h.a)(o,2);return{alert:n,showAlert:function(e){var t=e.text,n=e.type;a({show:!0,text:t,type:void 0===n?"danger":n})},loading:i,setLoading:l,success:j[0],setSuccess:j[1],hideAlert:function(){a({show:!1,text:"",type:"danger"})}}};var D,E=b.a.section(N||(N=Object(j.a)(["\n  .alert {\n    margin-top: 3rem;\n    margin-bottom: -1.5rem;\n  }\n  h4 {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    margin-top: 1rem;\n    text-align: center;\n  }\n  .login-link {\n    display: inline-block;\n    margin-left: 0.25rem;\n    text-transform: capitalize;\n    color: var(--primary-500);\n    cursor: pointer;\n  }\n  .btn:disabled {\n    cursor: not-allowed;\n  }\n"]))),U=function(){var e=Object(r.useState)({name:"",email:"",password:"",language:"",phonenumber:""}),t=Object(h.a)(e,2),n=t[0],a=t[1],s=I(),c=s.alert,i=s.showAlert,o=s.loading,j=s.setLoading,b=s.success,d=s.setSuccess,u=s.hideAlert,g=function(e){a(Object(R.a)(Object(R.a)({},n),{},Object(P.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(p.a)(Object(m.a)().mark((function e(t){var r,s,c,l,o,b,p,h,g;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(),j(!0),r=n.name,s=n.email,c=n.password,l=n.language,o=n.phonenumber,b={name:r,email:s,password:c,language:l,phonenumber:o},e.prev=5,e.next=8,x.a.post(O+"/api/v1/auth/register",b);case 8:p=e.sent,h=p.data,d(!0),a({name:"",email:"",password:"",language:"",phonenumber:""}),i({text:h.msg,type:"success"}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),g=e.t0.response.data.msg,i({text:g||"there was an error"});case 19:j(!1);case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(E,{className:"page",children:[c.show&&Object(f.jsx)("div",{className:"alert alert-".concat(c.type),children:c.text}),!b&&Object(f.jsxs)("form",{className:o?"form form-loading":"form",onSubmit:v,children:[Object(f.jsx)(F,{type:"name",name:"name",value:n.name,handleChange:g}),Object(f.jsx)(F,{type:"email",name:"email",value:n.email,handleChange:g}),Object(f.jsx)(F,{type:"phonenumber",name:"phonenumber",value:n.phonenumber,handleChange:g}),Object(f.jsx)(F,{type:"language",name:"language",value:n.language,handleChange:g}),Object(f.jsx)(F,{type:"password",name:"password",value:n.password,handleChange:g}),Object(f.jsx)("button",{type:"submit",className:"btn btn-block",disabled:o,children:o?"Loading...":"Register"}),Object(f.jsxs)("p",{children:["Already a have an account?",Object(f.jsx)(l.b,{to:"/login",className:"login-link",children:"Log In"})]})]})]})})};var z,T=b.a.section(D||(D=Object(j.a)(["\n  .alert {\n    margin-top: 3rem;\n  }\n  h4 {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    text-align: center;\n  }\n  .btn {\n    margin-bottom: 1.5rem;\n  }\n  .register-link,\n  .reset-link {\n    display: inline-block;\n    margin-left: 0.25rem;\n    text-transform: capitalize;\n    color: var(--primary-500);\n    cursor: pointer;\n  }\n  .reset-link {\n    margin-top: 0.25rem;\n  }\n  .btn:disabled {\n    cursor: not-allowed;\n  }\n"]))),W=function(){var e=y().saveUser,t=Object(o.g)(),n=Object(r.useState)({email:"",password:""}),a=Object(h.a)(n,2),s=a[0],c=a[1],i=I(),j=i.alert,b=i.showAlert,d=i.loading,u=i.setLoading,g=i.hideAlert,v=function(e){c(Object(R.a)(Object(R.a)({},s),{},Object(P.a)({},e.target.name,e.target.value)))},w=function(){var n=Object(p.a)(Object(m.a)().mark((function n(a){var r,i,l,o,j;return Object(m.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),g(),u(!0),r=s.email,i=s.password,l={email:r,password:i},n.prev=5,n.next=8,x.a.post(O+"/api/v1/auth/login",l);case 8:o=n.sent,j=o.data,c({name:"",email:"",password:""}),b({text:"Welcome, ".concat(j.user.name,". Redirecting to dashboard..."),type:"success"}),u(!1),e(j.user),t.push("/dashboard"),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(5),b({text:n.t0.response.data.msg}),u(!1);case 21:case"end":return n.stop()}}),n,null,[[5,17]])})));return function(e){return n.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(T,{className:"page",children:[j.show&&Object(f.jsx)("div",{className:"alert alert-".concat(j.type),children:j.text}),Object(f.jsxs)("form",{className:d?"form form-loading":"form",onSubmit:w,children:[Object(f.jsx)(F,{type:"email",name:"email",value:s.email,handleChange:v}),Object(f.jsx)(F,{type:"password",name:"password",value:s.password,handleChange:v}),Object(f.jsx)("button",{type:"submit",className:"btn btn-block",disabled:d,children:d?"Loading...":"Login"}),Object(f.jsxs)("p",{children:["Don't have an account?",Object(f.jsx)(l.b,{to:"/register",className:"register-link",children:"Register"})]}),Object(f.jsxs)("p",{children:["Forgot your password?"," ",Object(f.jsx)(l.b,{to:"/forgot-password",className:"reset-link",children:"Reset Password"})]})]})]})})};var B,H=b.a.section(z||(z=Object(j.a)([""]))),J=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),c=Object(h.a)(s,2),i=c[0],j=c[1],b=y().isLoading,d=new URLSearchParams(Object(o.h)().search),u=function(){var e=Object(p.a)(Object(m.a)().mark((function e(){var t,n;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,x.a.post(O+"/api/v1/auth/verify-email",{verificationToken:d.get("token"),email:d.get("email")});case 4:t=e.sent,n=t.data,console.log(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response),a(!0);case 13:j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b||u()}),[]),i?Object(f.jsx)(H,{className:"page",children:Object(f.jsx)("h2",{children:"Loading..."})}):n?Object(f.jsx)(H,{className:"page",children:Object(f.jsx)("h4",{children:"There was an error, please double check your verification link "})}):Object(f.jsxs)(H,{className:"page",children:[Object(f.jsx)("h2",{children:"Account Confirmed"}),Object(f.jsx)(l.b,{to:"/login",className:"btn",children:"Please login"})]})};n.p;var M,Y,G=b.a.div(B||(B=Object(j.a)(["\n  p span {\n    background: var(--primary-500);\n    padding: 0.15rem 0.25rem;\n    color: var(--white);\n    border-radius: var(--borderRadius);\n    letter-spacing: var(--letterSpacing);\n  }\n"]))),q=function(){var e=y().user,t=(e.name,e.userId),n=e.role;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(G,{className:"page",children:[Object(f.jsxs)("h2",{children:["Hello there, ",e.name]}),Object(f.jsxs)("p",{children:["Your ID : ",Object(f.jsx)("span",{children:t})]}),Object(f.jsxs)("p",{children:["Your Role : ",Object(f.jsx)("span",{children:n})]})]})})},K=n(40),Q=["children"],V=function(e){var t=e.children,n=Object(K.a)(e,Q),a=y().user;return Object(f.jsx)(o.b,Object(R.a)(Object(R.a)({},n),{},{render:function(){return a?t:Object(f.jsx)(o.a,{to:"/"})}}))},X=b.a.main(M||(M=Object(j.a)(["\n  h4,\n  p {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    margin-top: 1rem;\n  }\n  .login-link {\n    display: inline-block;\n    margin-left: 0.25rem;\n    text-transform: capitalize;\n    color: var(--primary-500);\n    cursor: pointer;\n  }\n"]))),Z=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],s=I(),c=s.alert,i=s.showAlert,o=s.loading,j=s.setLoading,b=s.success,d=s.setSuccess,u=s.hideAlert,g=function(){var e=Object(p.a)(Object(m.a)().mark((function e(t){var a,r;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),j(!0),u(),n){e.next=7;break}return i({text:"Please provide email"}),j(!1),e.abrupt("return");case 7:return e.prev=7,e.next=10,x.a.post(O+"/api/v1/auth/forgot-password",{email:n});case 10:a=e.sent,r=a.data,i({text:r.msg,type:"success"}),d(!0),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),i({text:"Something went wrong, please try again"}),d(!0);case 20:j(!1);case 21:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(X,{className:"page",children:[c.show&&Object(f.jsx)("div",{className:"alert alert-".concat(c.type),children:c.text}),!b&&Object(f.jsxs)("form",{className:o?"form form-loading":"form",onSubmit:g,children:[Object(f.jsx)("h4",{children:"Forgot password"}),Object(f.jsx)(F,{type:"email",name:"email",value:n,handleChange:function(e){a(e.target.value)}}),Object(f.jsx)("button",{type:"submit",className:"btn btn-block",disabled:o,children:o?"Please Wait...":"Get Reset Password Link"}),Object(f.jsxs)("p",{children:["Already a have an account?",Object(f.jsx)(l.b,{to:"/login",className:"login-link",children:"Log In"})]})]})]})};var $,_=b.a.section(Y||(Y=Object(j.a)(["\n  h4,\n  p {\n    text-align: center;\n  }\n  p {\n    margin: 0;\n    margin-top: 1rem;\n  }\n"]))),ee=function(){var e=Object(o.g)(),t=Object(r.useState)(""),n=Object(h.a)(t,2),a=n[0],s=n[1],c=I(),i=c.alert,l=c.showAlert,j=c.loading,b=c.setLoading,d=c.success,u=c.setSuccess,g=new URLSearchParams(Object(o.h)().search),v=function(){var e=Object(p.a)(Object(m.a)().mark((function e(t){return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var t=Object(p.a)(Object(m.a)().mark((function t(n){var r;return Object(m.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),b(!0),a){t.next=6;break}return l({text:"please enter password"}),b(!1),t.abrupt("return");case 6:return t.prev=6,t.next=9,x.a.post(O+"/api/v1/auth/reset-password",{password:a,token:g.get("token"),email:g.get("email")});case 9:r=t.sent,r.data,b(!1),u(!0),l({text:"Success, redirecting to login page shortly",type:"success"}),setTimeout((function(){e.push("/login")}),3e3),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),l({text:t.t0.response.data.msg}),b(!1);case 21:case"end":return t.stop()}}),t,null,[[6,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)(_,{className:"page",children:[i.show&&Object(f.jsx)("div",{className:"alert alert-".concat(i.type),children:i.text}),!d&&Object(f.jsxs)("form",{className:j?"form form-loading":"form",onSubmit:w,children:[Object(f.jsx)("h4",{children:"reset password"}),Object(f.jsx)(F,{type:"password",name:"password",value:a,handleChange:v}),Object(f.jsx)("button",{type:"submit",className:"btn btn-block",disabled:j,children:j?"Please Wait...":"New Password"})]})]})},te=n.p+"static/media/emeafricalogo.756a48d7.png",ne=b.a.nav($||($=Object(j.a)(["\n  background: var(--white);\n  height: 6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .nav-center {\n    width: var(--fluid-width);\n    max-width: var(--max-width);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-wrap: wrap;\n  }\n  .nav-links {\n    display: flex;\n    flex-direction: column;\n  }\n  .nav-links p {\n    margin: 0;\n    text-transform: capitalize;\n    margin-bottom: 0.25rem;\n  }\n  .home-link {\n    display: flex;\n    align-items: flex-start;\n  }\n  @media (min-width: 776px) {\n    .nav-links {\n      flex-direction: row;\n      align-items: center;\n    }\n    .nav-links p {\n      margin: 0;\n      margin-right: 1.5rem;\n    }\n  } ;\n"]))),ae=function(){var e=y(),t=e.user,n=e.logoutUser;return Object(f.jsx)(ne,{children:Object(f.jsxs)("div",{className:"nav-center",children:[Object(f.jsx)(l.b,{to:"/",className:"home-link",children:Object(f.jsx)("img",{src:te,alt:"emed Africa",className:"logo"})}),t&&Object(f.jsxs)("div",{className:"nav-links",children:[Object(f.jsxs)("p",{children:["hello, ",t.name]}),Object(f.jsx)("button",{className:"btn btn-small",onClick:function(){n()},children:"logout"})]})]})})};var re=function(){return y().isLoading?Object(f.jsx)("section",{className:"page page-center",children:Object(f.jsx)("div",{className:"loading"})}):Object(f.jsxs)(l.a,{children:[Object(f.jsx)(ae,{}),Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/",exact:!0,children:Object(f.jsx)(L,{})}),Object(f.jsx)(o.b,{path:"/login",exact:!0,children:Object(f.jsx)(W,{})}),Object(f.jsx)(o.b,{path:"/register",exact:!0,children:Object(f.jsx)(U,{})}),Object(f.jsx)(V,{path:"/dashboard",exact:!0,children:Object(f.jsx)(q,{})}),Object(f.jsx)(o.b,{path:"/forgot-password",exact:!0,children:Object(f.jsx)(Z,{})}),Object(f.jsx)(o.b,{path:"/user/verify-email",exact:!0,children:Object(f.jsx)(J,{})}),Object(f.jsx)(o.b,{path:"/user/reset-password",exact:!0,children:Object(f.jsx)(ee,{})}),Object(f.jsx)(o.b,{path:"*",children:Object(f.jsx)(A,{})})]})]})};i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(w,{children:Object(f.jsx)(re,{})})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.d15723db.chunk.js.map